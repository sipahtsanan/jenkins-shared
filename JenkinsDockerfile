FROM jenkins/jenkins:lts

USER root

RUN apt-get update && \
    apt-get install -y curl wget gnupg ca-certificates \
        python3 python3-pip \
        libnss3 libatk-bridge2.0-0 libdrm2 libxkbcommon0 \
        libgbm1 libasound2 libxshmfence1 libxrandr2 \
        libgtk-3-0 libx11-xcb1 libxcb-dri3-0 \
        libdbus-glib-1-2 libxt6 && \
    curl -fsSL https://deb.nodesource.com/setup_18.x | bash - && \
    apt-get install -y nodejs && \
    npm install -g newman newman-reporter-html && \
    npm install -g playwright && \
    playwright install chromium && \
    playwright install-deps chromium

USER jenkins
